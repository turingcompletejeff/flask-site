{% extends "layout.html" %}

{% block title %}Minecraft Server{% endblock %}

{% block js %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/mc-status.css') }}">
{% endblock %}

{% block content %}

<div id="terminal-wrapper">
	<pre id="rcon-response">&nbsp;</pre>
	<input id="mc-input" placeholder="type a command..."/>
	<button id="mc-cmd" type="button" onclick="rconCommand()">send</button>
</div>
<div class="offline-message" id="offline-message" role="alert">
  <strong>Server Offline:</strong> The Minecraft server is currently offline. Command input is disabled until the server comes back online.
</div>
<hr />
Visit
<a href="https://github.com/OwenCochell/mctools#minecraft-connection-tools">mc tools</a>
for more info
{% endblock %}

{% block rightsidebar %}
<div id="right-sidebar">
<div id="rcon-query">
  <!-- Status Indicator -->
  <div class="status-container">
    <div class="status-indicator unknown loading" id="status-indicator"
         role="status" aria-label="Server status indicator"></div>
    <div class="status-info">
      <div class="status-text" id="status-text">Checking status...</div>
      <div class="status-timestamp" id="status-timestamp"></div>
    </div>
    <button class="refresh-button" id="refresh-button"
            type="button" aria-label="Refresh server status">
      <span class="material-symbols-outlined">refresh</span>
    </button>
  </div>

  <p id="rcon-motd"></p>
  <p id="rcon-plugins"></p>
  <p id="rcon-version"></p>
  <table id="rcon-query-players">
  </table>
</div>
</div>
{% endblock %}

{% block endjs %}
<script>
  // Define API endpoints for mc-status.js
  var MC_ENDPOINTS = {
    status: "{{ url_for('mc.mc_status') }}",
    list: "{{ url_for('mc.list') }}",
    query: "{{ url_for('mc.rconQuery') }}",
    command: "{{ url_for('mc.rconCommand') }}"
  };
</script>
<script src="{{ url_for('static', filename='js/mc-status.js') }}"></script>
{% endblock %}
